db: tests-examples/spider/architecture/tables/db.sqlite
inputs:
- tests-examples/spider/architecture/tables/architect.csv
- tests-examples/spider/architecture/tables/bridge.csv
output: tests-examples/spider/architecture/tables/0017.csv
constants:
- American
columns:
- nationality
- architect_id
comment: |-
  SELECT t1.name
  FROM bridge AS t1
  JOIN architect AS t2 ON t1.architect_id = t2.id
  WHERE t2.nationality = 'American'
  ORDER BY t1.length_feet
  [filter(input0, "nationality == 'American'"), intersect(line0, line0, 'id'), inner_join(line1, input1, 'id = architect_id')]

sql: |-
  SELECT t1.name
  FROM bridge AS t1
  JOIN architect AS t2 ON t1.architect_id = t2.id
  WHERE t2.nationality = 'American'
  ORDER BY t1.length_feet
full_sketch: |
  T1 = filter(architect, nationality == 'American')
  T2 = inner_join(T1, bridge, id = architect_id)
  out = select(name.other)